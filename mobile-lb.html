<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<meta name="viewport" content="width=device-width,minimum-scale=1.0,maximum-scale=1.0,user-scalable=0">
	<meta http-equiv="X-UA-Compatible" content="IE=Edge"/>
	<meta name="renderer" content="webkit"/>
</head>
<style>
	body{
		margin:0;
	}
	.wheel-box{
		width:100%;
		height:auto;
		border: 2px solid #acbdef;
		box-sizing:border-box;
		overflow: hidden;
	}
	.wheel{
		height:auto;
	}
	.wheel div{
		float: left;
		font-size: 0;
	}
	.wheel:after{
		content: "";
		display: block;
		clear: both;
	}
	.wheel div img{
		width:100%;
	}
</style>
<body>
	<div class="wheel-box">
		<div class="wheel">
			<div><img src="img/1.jpg" alt=""></div>
			<div><img src="img/2.jpg" alt=""></div>
			<div><img src="img/3.jpg" alt=""></div>
			<div><img src="img/4.jpg" alt=""></div>
			<!-- <div><img src="img/1.jpg" alt=""></div> -->
		</div>
	</div>
</body>
<script>
	var cw=document.documentElement.clientWidth;
	var wheel=document.querySelector(".wheel");
	var divs=document.querySelectorAll(".wheel>div");
	wheel.style.width=cw*divs.length+"px";
	for (var i = 0; i < divs.length; i++) {
		divs[i].style.width=cw+"px";
	};
	var index=0;
	// 自动轮播
	var t=setInterval(set,2000);
	function set(){
		index++;
		wheel.style.transition="transform 1s";
		if(index>=divs.length){
			index=0;
			wheel.style.transition="";
		}
		wheel.style.transform="translate3d("+(-index*cw)+"px,0,0)";
	};
	// 手动轮播
	wheel.addEventListener("touchstart",function(e){
		clearInterval(t);
		var th=e.targetTouches[0];
		var sf=th.clientX;
		var ss=e.timeStamp;
		var cx=0;
		wheel.addEventListener("touchmove",move);
		function move(e){
			var th=e.targetTouches[0];
			cx=th.clientX-sf;
			wheel.style.transition="";
			wheel.style.transform="translate3d("+(cx-index*cw)+"px,0,0)";
		}

		wheel.addEventListener("touchend",end);
		function end(e){
			var es=e.timeStamp;
			if(Math.abs(cx)>=cw/2 || (es-ss)<300&&Math.abs(cx)>30){
				wheel.style.transition="transform 1s"
				if(cx<0){
					index++;
				}else if(cx>0){
					index--;
				}
				if(index==divs.length){
					// wheel.style.transition=""
					index=1;
				}
				if(index<0){
					// wheel.style.transition=""
					index=divs.length-2;
				}
				wheel.style.transform="translate3d("+(-index*cw)+"px,0,0)";
			}else{
				wheel.style.transition="transform 1s"
				wheel.style.transform="translate3d("+(-index*cw)+"px,0,0)";
			}
			wheel.removeEventListener("touchmove",move);
			wheel.removeEventListener("touchend",end);
			t=setInterval(set,2000);
		}
	});
</script>
</html>